package redisearch

import "strings"

func EscapeRedisSearchString(val string) string {
	if len(val) == 1 {
		return redisSearchStringReplacerOne.Replace(val)
	}

	return redisSearchStringReplacer.Replace(val)
}

var redisSearchStringReplacer = strings.NewReplacer(",", "\\,", ".", "\\.", "<", "\\<", ">", "\\>", "{", "\\{",
	"}", "\\}", "[", "\\[", "]", "\\]", "\"", "\\\"", "'", "\\'", ":", "\\:", ";", "\\;", "!", "\\!", "@", "\\@",
	"#", "\\#", "$", "\\$", "%", "\\%", "^", "\\^", "&", "\\&", "*", "\\*", "(", "\\(", ")", "\\)", "-", "\\-",
	"+", "\\+", "=", "\\=", "~", "\\~", `/`, `\/`, "`", "\\`", `\`, `\\`, `|`, `\|`, `?`, `\?`)

var redisSearchStringReplacerBack = strings.NewReplacer("\\,", ",", "\\.", ".", "<", "<", "\\>", ">", "\\{", "{",
	"\\}", "}", "\\[", "[", "\\]", "]", "\\\"", "\"", "\\'", "'", "\\:", ":", "\\;", ";", "\\!", "!", "\\@", "@",
	"\\#", "#", "\\$", "$", "\\%", "%", "\\^", "^", "\\&", "&", "\\*", "*", "\\(", "(", "\\)", ")", "\\-", "-",
	"\\+", "+", "\\=", "=", "\\~", "~", `\/`, `/`, "\\`", "`", `\|`, `|`, `\?`, `?`)

var redisSearchStringReplacerOne = strings.NewReplacer(",", "\\,", ".", "\\.", "<", "\\<", ">", "\\>", "{", "\\{",
	"}", "\\}", "[", "\\[", "]", "\\]", "\"", "\\\"", "'", "\\'", ":", "\\:", ";", "\\;", "!", "\\!", "@", "\\@",
	"#", "\\#", "$", "\\$", "%", "\\%", "^", "\\^", "&", "\\&", "*", "\\*", "(", "\\(", ")", "\\)", "-", "\\-",
	"+", "\\+", "=", "\\=", "~", "\\~", `/`, `\/`, "`", "\\`", `_`, `\_`, `|`, `\|`, `\`, `\\`, `?`, `\?`)

var redisSearchStringReplacerBackOne = strings.NewReplacer("\\,", ",", "\\.", ".", "<", "<", "\\>", ">", "\\{", "{",
	"\\}", "}", "\\[", "[", "\\]", "]", "\\\"", "\"", "\\'", "'", "\\:", ":", "\\;", ";", "\\!", "!", "\\@", "@",
	"\\#", "#", "\\$", "$", "\\%", "%", "\\^", "^", "\\&", "&", "\\*", "*", "\\(", "(", "\\)", ")", "\\-", "-",
	"\\+", "+", "\\=", "=", "\\~", "~", `\/`, `/`, "\\`", "`", `\_`, `_`, `\|`, `|`, `\\`, `\`, `\?`, `?`)
